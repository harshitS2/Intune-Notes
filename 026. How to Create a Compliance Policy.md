
---

# Lecture Notes: Creating and Testing a Device Compliance Policy in Microsoft Intune (Windows 10 & Later)

---

## Overview

* **Topic:** Device Compliance Policy Creation
* **Platform:** Microsoft Intune (Microsoft Endpoint Manager)
* **Target OS:** Windows 10 and later
* **Purpose:** Enforce security and configuration standards before granting access to corporate resources

---

## Why Device Compliance Policies Matter

Device compliance policies ensure that only **secure and trusted devices** can access organizational data and services.

### Key Benefits

* Enforce security baselines
* Integrate with Conditional Access
* Block non-compliant devices automatically
* Improve overall endpoint security posture

---

## Licensing Requirements

To use device compliance policies, your organization must have:

* **Azure AD Premium P1 or P2**
* **Microsoft Intune license per device/user**

---

## Policy Behavior Overview

When a device attempts to access corporate resources:

1. Intune evaluates the assigned compliance policy
2. Device status is checked:

   * **Compliant** → Access allowed
   * **Non-Compliant** → Access blocked (via Conditional Access)
3. Actions for Non-Compliance are triggered (email, retire list, etc.)

---

## Step 1: Verify Target Device Group

### Navigation Path

1. Open **Microsoft Endpoint Manager Admin Center**
2. Go to **Groups**
3. Select your device group
   Example:

   > `Test_Win_Client`
4. Click **Members**
5. Confirm the Windows 10/11 device is listed

> Compliance policies are applied to **groups**, not individual devices.

---

## Step 2: Create a Compliance Policy

### Navigation Path

1. Go to **Devices**
2. Under **Policy**, select **Compliance Policies**
3. Click **Create Policy**
4. Platform:

   > **Windows 10 and later**
5. Click **Create**

---

## Step 3: Basics Configuration

### Example Values

| Field       | Value                             |
| ----------- | --------------------------------- |
| Name        | Test Windows 10 Compliance Policy |
| Description | (Optional)                        |

Click **Next**

---

## Step 4: Configure Compliance Settings

Compliance settings are grouped into six categories.

---

### 1. Custom Compliance (Optional)

* Uses:

  * JSON files
  * PowerShell scripts
* Purpose:

  * Add advanced compliance checks not natively available in Intune
* Example Use Cases:

  * Validate presence of custom software
  * Check registry values
  * Verify security agent health

> Recommended for advanced environments. Covered in a dedicated module.

---

### 2. Device Health

Used to verify core Windows security features.

#### Available Settings

* **BitLocker**
* **Secure Boot**
* **Code Integrity**

### Example Configuration

Enable:

* ✔ BitLocker
* ✔ Secure Boot
* ✔ Code Integrity

---

### 3. Device Properties

Used to enforce:

* Minimum OS version
* Maximum OS version

---

### 4. Configuration Manager Compliance (Optional)

* Used only in **Co-Management (SCCM + Intune)** environments
* Skip if you are running **Intune-only**

---

### 5. Device Security

Used to enforce endpoint protection controls.

#### Common Settings

* Firewall
* Antivirus
* Anti-spyware
* Microsoft Defender
* Microsoft Defender for Endpoint (ATP)

### Test Policy Configuration

Enable:

* ✔ Require Firewall
* ✔ Require Antivirus
* ✔ Require Anti-Spyware

Click **Next**

---

## Step 5: Configure Actions for Non-Compliance

By default, every policy includes:

> **Mark Device Non-Compliant — Immediate**

You can add additional actions.

---

### Example Enterprise Action Flow

| Action                    | Schedule    |
| ------------------------- | ----------- |
| Mark Device Non-Compliant | Immediately |
| Send Email to User        | 0 Days      |
| Add Device to Retire List | 60 Days     |

---

### Add Email Action

1. Click **Add Action**
2. Select:

   > **Send email to end user**
3. Schedule:

   > `0 days`
4. Select **Notification Template**

   > Example: `Test Email Notification`

---

### Add Retire Action

1. Click **Add Action**
2. Select:

   > **Add device to retire list**
3. Schedule:

   > `60 days`

Click **Next**

---

## Step 6: Assign Policy to Group

### Assignment

1. Click **Add Groups**
2. Select:

   > `Test_Win_Client`
3. Confirm device count
4. Click **Next**

---

## Step 7: Review and Create

1. Review all settings
2. Click **Create**

### Confirmation

> Compliance policy created successfully

---

## Step 8: Monitor Policy Assignment

### Navigation Path

1. Go to **Devices**
2. Click **All Devices**
3. Select your Windows device
4. Click **Monitor → Device Compliance**

Initial state:

> **Not Evaluated**

---

## Step 9: Testing the Policy (Firewall Example)

### Test Scenario

Turn off Windows Defender Firewall to trigger non-compliance.

---

### On Windows Device

1. Search:

   > `Windows Defender Firewall`
2. Click **Turn Windows Defender Firewall On or Off**
3. Turn Firewall **Off**
4. Click **OK**

---

### Force Policy Sync

From Admin Portal:

1. Go to **Devices**
2. Select device
3. Click **Sync**

OR from Windows Device:

1. Open **Company Portal**
2. Click **Settings**
3. Click **Sync**

---

## Step 10: Verify Non-Compliance

### Portal Path

1. Go to **Devices**
2. Select device
3. Click **Monitor → Device Compliance**
4. Click your policy name

### Expected Result

| Setting      | Status          |
| ------------ | --------------- |
| Firewall     | ❌ Not Compliant |
| Antivirus    | ✔ Compliant     |
| Anti-Spyware | ✔ Compliant     |

Device Status:

> **Non-Compliant**

---

## Step 11: Verify User Notification

User receives:

* Email from compliance template
* Instructions to remediate

---

## Step 12: Restore Compliance

### On Windows Device

1. Turn Firewall **On**
2. Perform **Manual Sync**

---

### Verify in Portal

1. Go to **Devices**
2. Select device
3. Click **Monitor → Device Compliance**

Device Status:

> **Compliant**

---

## Monitoring Options

### Policy View

**Devices → Compliance Policies → Policy Name → Device Status**

### Device View

**Devices → All Devices → Device → Monitor → Device Compliance**

---

## Best Practices

### Enterprise Recommendations

* Always combine compliance with **Conditional Access**
* Enforce:

  * BitLocker
  * Defender Antivirus
  * Firewall
* Use **email notifications** before blocking access
* Apply policies to **device groups**, not users
* Test in **pilot groups first**

---

## Common Mistakes

* Not assigning the policy to a group
* Forgetting to configure **Actions for Non-Compliance**
* Skipping device sync during testing
* Not using Conditional Access to enforce results

---

## Security Impact

This setup enables:

* Zero Trust enforcement
* Automated remediation
* Reduced security incidents
* Improved compliance visibility

---

## Summary

In this session, you:

✔ Created a Windows compliance policy
✔ Configured device security and health rules
✔ Set actions for non-compliance
✔ Assigned the policy to a device group
✔ Tested non-compliance and remediation
✔ Verified compliance recovery

---

## Next Module

> **Integrating Device Compliance with Azure AD Conditional Access**

You will learn how to:

* Block access to Microsoft 365 for non-compliant devices
* Require compliant devices for VPN and SaaS apps
* Build real-world Zero Trust access policies

---

## Key Takeaway

> **Compliance policies define trust. Conditional Access enforces it.**

---

**End of Lecture Notes**
